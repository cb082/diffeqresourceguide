<!--
- Automata, Transition Tables, Accepting states
- Deterministic transition systems
    • X = State space
    • A = Alphabet of "legal moves" or "actions"
    • \delta : A x X -> X = Transition function
- Deterministic automata (DA)
    • deterministic transition system
    • \alpha : X -> 2 = Accept/reject function
- Drawing DAs
    • Circles, double cicles, arrows, and labels
    • Transition tables
- Basic examples:
    • The empty automaton
    • Parity recognition and modular arithmetic
- Intuitive notion of word acceptance by a "starting state"
- Using a sink to simulate borkedness (CJ's pergatory)
-->

<h1>Automata</h1>
<p>
    Last time, we saw that state diagrams were useful as compact representations of some top-down puzzle games like Sokoban and mazes.
    Our definition of "state diagram" was a bit informal, but that was actually for good reason: they are supposed to be useful pictures, not mathematical objects per-se. 
    This section is about the <i>formal</i> definition of automaton and its consequences. 
</p>
<p>
    <i>What do you mean by formal?</i> 
    Well, I'm so glad you asked. 
    A <i>formal definition</i> is really a precise, unambiguous description (as in it cannot be interpreted in more than one way) of a mathematical object.
    The <i>data</i> of a formal definition consists of all of the components of the object it is defining.
    In our case, the mathematical object in question is a mathematical model of a computer called an <i>automaton</i>, and the data of the definition is contained in the bullet points below it.
</p>

<div class="definition" id="automaton">
    <b>(Automaton)</b>
    An <i>automaton</i> \(\mathcal A = (Q, A, \delta, F)\) consists of the following data:
    <ul>
        <li>A set \(Q\) of <i>states</i>, called the <i>state space</i></li>
        <li>A set \(A\) of <i>input letters</i>, called the <i>input alphabet</i></li>
        <li>A set \(\delta \subseteq Q \times A \times Q\) of <i>transitions</i>, called the <i>transition relation</i></li>
        <li>A set \(F \subseteq Q\) of <i>final</i> (also called <i>accepting</i>) <i>states</i></li>
    </ul>
    Given states \(x_1,x_2 \in Q\) and an input letter \(a \in A\), we write \(x_1 \xrightarrow{a}_\delta x_2\) to mean that \((s_1, a, s_2) \in \delta\).
    Furthermore, given \(x \in Q\) and in input letter \(a \in A\), we define the set of <i>outgoing \(a\)-transitions from state \(x\)</i> by
    \[
        \delta(x, a) = \{y \in Q \mid x \xrightarrow{a}_\delta y\}
    \]
</div>

<p>
    Recall that a <i>relation</i> is a set of tuples, which are immutable finite lists (just like in Python). 
    In the definition of <i>automaton</i>, the transition relation is a <i>trinary</i> relation, which means it consists of a set of triples \((x, a, y)\), immutable lists of length \(3\).
    Every automaton can be drawn visually using a state diagram, just the ones we drew in the previous section.
</p>

<div class="example">
    <b>(Abstract State Diagram (A) again)</b>
    Recall this example from last time:
    <div class="figure">
        <img src="../imgs/reverseengineering.svg" />
        Abstract state diagram (A)
    </div>

    Abstract state diagram (A) is a visual depiction of the automaton \(\mathcal A = (Q, A, \delta, F)\), where 
    \[
        \begin{aligned}
            Q &= \{s_1, s_2, s_3, s_4\} \\
            A &= \{\Uparrow, \Rightarrow, \Downarrow, \Leftarrow\} \\
            \delta &= \{
                    (s_1, \Rightarrow, s_2), 
                    (s_2, \Leftarrow, s_4), 
                    (s_2, \Downarrow, s_3), 
                    (s_3, \Uparrow, s_2), 
                    (s_4, \Rightarrow, s_2), 
            \} \\
            F &= \{s_2, s_3, s_4\}
        \end{aligned}
    \]
    Here, we have taken the final states of \(\mathcal A\) to be the <i>winning</i> states. 
</div>

<p>
    Just like with understanding any mathematical definition, it is important to start by considering its most trivial examples.
</p>

<div class="example">
    <b>(Empty)</b>
    The <i>empty</i> automaton \(\mathcal A_\emptyset = (Q, A, \delta, F)\) has 
    \[
        Q = \delta = F = \emptyset
    \]
</div>

<div class="example">
    <b>(Sink)</b>
    The <i>sink</i> automaton \(\mathcal A_\bullet = (Q, A, \delta, F)\) has 
    \[
        Q = \{\bullet\}
        \qquad \delta = F = \emptyset
    \]
</div>

<div class="example">
    <b>(Diverging Loop)</b>
    The <i>diverging loop</i> automaton \(\mathcal A_\bullet = (Q, A, \delta, F)\) has 
    \[
        Q = \{\bullet\}
        \qquad \delta = \{(\bullet, a, \bullet) \mid a \in A\} 
        \qquad F = \emptyset
    \]
</div>

<div class="example">
    <b>(All-Accepting)</b>
    The <i>all-accepting</i> automaton \(\mathcal A_\bullet = (Q, A, \delta, F)\) has 
    \[
        Q = \{\bullet\}
        \qquad \delta = \{(\bullet, a, \bullet) \mid a \in A\} 
        \qquad F = Q
    \]
</div>

<p>
    Just like before, an easy way to write down the transition relation of an automaton is using its <i>transition table</i>.
</p>

<div class="definition">
    <b>(Transition Table)</b>
    Given an <i>automaton</i> \(\mathcal A = (Q, A, \delta, F)\), the <i>transition table</i> for \(\mathcal A\) is a 2-dimensional table where 
    <ul>
        <li>Each row of the table corresponds to a state \(x \in Q\)</li>
        <li>The first column of the table records whether the row's state is accepting (\(=1\)) or not accepting (\(=0\))</li>
        <li>All columns but the first colum correspond to an input letter </li>
        <li>In the column corresponding to \(a\) and row corresponding to \(x\), we record the outgoing \(a\)-transitions from \(x\)</li>
    </ul>
    <div class="figure">
        <table>
            <tr>
                <td style="color:gray">
                    \(\to\)
                </td>
                <td>
                    \(\cdots\)
                </td>
                <td>
                    \(a\)
                </td>
            </tr>
            <tr>
                <td>
                    \(\vdots\)
                </td>
                <td>
                </td>
                <td>
                    \(\vdots\)
                </td>
            </tr>
            <tr>
                <td>
                    \(x\)
                </td>
                <td>
                    \(\cdots\)
                </td>
                <td>
                    \(\delta(x, a)\)
                </td>
            </tr>
        </table>
    </div>
</div>

<p>
    Transition tables allow us to go back and forth between state diagrams and automata.
</p>

<div class="example">
    <b>(Transition Table for State Diagram (A))</b>
    We've already seen the transition table for diagram (A), but we left out the accepting states part before.
    <div class="figure">
        <table>
            <tr>
                <td>\(\textcolor{gray}{\rightarrow}\)</td>
                <td>\(F\)</td>
                <td>\(\Uparrow\)</td>
                <td>\(\Rightarrow\)</td>
                <td>\(\Downarrow\)</td>
                <td>\(\Leftarrow\)</td>
            </tr>
            <tr>
                <td>\(s_1\)</td>
                <td>0</td>
                <td></td>
                <td>\(s_2\)</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>\(s_2\)</td>
                <td>1</td>
                <td></td>
                <td></td>
                <td>\(s_3\)</td>
                <td>\(s_4\)</td>
            </tr>
            <tr>
                <td>\(s_3\)</td>
                <td>1</td>
                <td>\(s_2\)</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>\(s_4\)</td>
                <td>1</td>
                <td></td>
                <td>\(s_2\)</td>
                <td></td>
                <td></td>
            </tr>
        </table>
        The transition table for abstract state diagram (A).
    </div>
</div>

<div class="exercise">
    <b>(Trivial Tables)</b>
    Draw transition tables for the empty, sink, diverging loop, and all-accepting automata.
</div>

<p>
    One thing that we have not addressed at this point is that the definition of <i>automaton</i> that we have given above has a particular feature that games don't really have:
    a state can have multiple outgoing transitions labelled with the same input letter.
    When you encounter this kind of situation, you are going to have to write multiple state names into the corresponding item in the transition table. 
</p>

<div class="exercise">
    <b>(Practice With Transition Tables)</b>
    Determine the state space \(Q\), the input alphabet \(A\), and the accepting states \(F\) of the automata below and write down their transition tables.
    <table class="alignenv">
        <tr>
            <td>\(\mathcal A_1\)</td>
            <td><img src="../imgs/1_1_automaton1b.png" /></td>
        </tr>
        <tr>
            <td>\(\mathcal A_2\)</td>
            <td><img src="../imgs/1_1_automaton1.png" /></td>
        </tr>
        <tr>
            <td>\(\mathcal A_3\)</td>
            <td><img src="../imgs/1_1_automaton2.png" class="svgscale"/></td>
        </tr>
    </table>
</div>

<!--Section-->
<h2>Partial, Deterministic, and Nondeterministic Automata</h2>
<p>
    As we stated before, the puzzle game examples of automata have the property that each legal action transports you to at most one state.
    This is a special property of automata that will come up often throughout the course.
</p>

<div class="definition">
    <b>(Types of Automata)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton. 
    <ul>
        <li>
            \(\mathcal A\) is called <i>deterministic</i> if for any state \(x \in Q\) and any input letter \(a \in A\), \(\delta(x, a)\) has one or fewer elements.
            If \(\mathcal A\) is not deterministic, it is called <i>Nondeterministic</i>.
        </li>
        <li>
            \(\mathcal A\) is called <i>total</i> if for any state \(x \in Q\) and any input letter \(a \in A\), \(\delta(x, a)\) has at least one element.
            If \(\mathcal A\) is not total, we say that it is <i>partial</i>.
        </li>
    </ul>
</div>

<div class="exercise">
    <b>(Differentiating Types)</b>
    Fix an input alphabet \(A\).
    Draw one of each of the following examples of automata \(\mathcal A = (Q, A, \delta, F)\):
    <ol>
        <li>\(\mathcal A\) is deterministic and total</li>
        <li>\(\mathcal A\) is nondeterministic and total</li>
        <li>\(\mathcal A\) is nondeterministic and partial</li>
        <li>\(\mathcal A\) is deterministic and partial</li>
    </ol>
</div>

<p>
    Remember from your discrete math course that a <i>function</i> \(f \colon X \to Y\) between two sets \(X\) and \(Y\) is a binary relation \(f \subseteq X \times Y\) such that for any \(x \in X\), there is a unique (i.e., exactly one) \(y \in Y\) such that \((x, y) \in f\).
    And notationally, if \(f\) is a function and \((x,y) \in f\), then you can write \(f(x) = y\).
</p>

<div class="problem">
    <b>(Functional Determinism)</b>
    Let \(\mathcal A = (Q, A, \delta, F)\) be an automaton.
    Prove that \(\mathcal A\) is a deterministic and total if and only if \(\delta\) is a function \(\delta \colon Q \times A \to Q\).
    <div class="hint">
        Remember how to prove "\(A\) if and only if \(B\)" statements: first, assume that \(A\) is true, and then argue that \(B\) follows from \(A\) (this called the <i>forward direction</i>).
        Second, assume that \(B\) is true, and then argue that \(A\) follows from \(B\) (this is called the <i>backwards diection</i>).
    </div>
    <div class="hint">
        If it helps, let \(X = Q \times A\) and \(Y = Q\) and show that \(\delta \colon X \to Y\) is a function if and only if \(\mathcal A\) is deterministic and total.
    </div>
</div>

<p color="red">
    <b>Note.</b> Just to be clear: in the literature, "nondeterministic" means "not necessarily deterministic", so under this terminology, technically speaking every automaton is nondeterministic.
    This is a reason, but that reason is beyond the scope of the course.
</p>